<div id="example-table"></div>

<script>
    //Build Tabulator
    var table = new Tabulator("#example-table", {
        height: "311px",
        layout: "fitColumns",
        placeholder: "No Data Set",
        columns: [
            {title: "ID", field: "id", sorter: "string", width: 200, editor: true},
            {title: "Title", field: "title", sorter: "number", editor: true},
            {title: "Year", field: "year", sorter: "string", editor: true}
        ],
        cellEdited: function (cell) {
            // This callback is called any time a cell is edited.
            console.log(cell.getRow().getData())
            $.ajax({

                url: '/courses/'+cell.getRow().getData().id,
                method: 'PATCH',
                dataType: 'json',
                data: {course: cell.getRow().getData()},
                success: function () {
                    toastr.info('Edit was successful!')
                    alert('Edit was successful!')
                },
                error: function () {
                    alert('Edit was not successful!')
                }

            })
        },
    });

    $(document).ready(function () {
        table.setData("/courses");
    });

</script>

<%= link_to 'New Course', new_course_path %>
